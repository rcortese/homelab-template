# Ajustes globais para a instância "core".
# Use este arquivo como ponto de partida para aplicar labels,
# redes externas compartilhadas e volumes nomeados em todos os
# serviços do ambiente principal.

services:
  app:
    labels:
      traefik.enable: "true"
      traefik.http.routers.app-core.rule: Host(`app.domain.com`)
      homelab.role: control-plane
    networks:
      core_proxy:
        ipv4_address: ${CORE_PROXY_IPV4}
    volumes:
      - type: volume
        source: core_logs
        target: /var/log/app

networks:
  core_proxy:
    external: true
    name: ${CORE_PROXY_NETWORK_NAME:-traefik_proxy}

volumes:
  core_logs:
    name: ${CORE_LOGS_VOLUME_NAME:-core_logs}
    driver: local
